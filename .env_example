# =====================================
# NexFlux Virtual Lab Backend Configuration
# =====================================

# Server Configuration
PORT=8080
GIN_MODE=debug  # debug, release, test

# =====================================
# Database Configuration
# =====================================
DB_HOST=localhost
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=nexflux_db
DB_PORT=5432
DB_DEBUG=true
DB_AUTO_MIGRATE=true

# =====================================
# Redis Configuration
# =====================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =====================================
# JWT Configuration
# =====================================
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE_HOURS=24

# =====================================
# OAuth Configuration
# =====================================
OAUTH_BASE_URL=http://localhost:8080
FRONTEND_URL=http://localhost:3000

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# GitHub OAuth
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret

# Apple Sign In
# Get these from Apple Developer Console
APPLE_CLIENT_ID=your_apple_service_id
APPLE_TEAM_ID=your_apple_team_id
APPLE_KEY_ID=your_apple_key_id
APPLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
YOUR_APPLE_PRIVATE_KEY_CONTENT_HERE
-----END PRIVATE KEY-----"

# =====================================
# File Storage Configuration
# =====================================
# Storage type: "local" or "minio"
STORAGE_TYPE=local

# Local Storage Settings (when STORAGE_TYPE=local)
UPLOAD_DIR=uploads
APP_URL=http://localhost:8080

# =====================================
# MinIO / S3 Configuration
# =====================================
# Set STORAGE_TYPE=minio to use MinIO
# 
# For local MinIO server:
# MINIO_ENDPOINT=localhost:9000
# MINIO_USE_SSL=false
#
# For cloud MinIO (e.g., MinIO hosted, DigitalOcean Spaces, etc.):
# MINIO_ENDPOINT=minio.example.com:443
# MINIO_USE_SSL=true
# MINIO_PUBLIC_URL=https://cdn.example.com

MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false
MINIO_REGION=us-east-1
MINIO_BUCKET_PREFIX=nexflux-
# MINIO_PUBLIC_URL=  # Optional: CDN URL for public access

# =====================================
# Optional: OpenAI for AI Features
# =====================================
# OPENAI_API_KEY=your_openai_api_key

# =====================================
# MQTT Configuration (VerneMQ)
# =====================================
# Used for real-time hardware communication with lab stations
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_CLIENT_ID=nexflux-backend
MQTT_USERNAME=
MQTT_PASSWORD=

# =====================================
# RabbitMQ Configuration
# =====================================
# Used for job queues (code compilation, session expiration, etc.)
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/

# =====================================
# LiveKit Configuration
# =====================================
# Used for real-time video streaming from lab hardware
LIVEKIT_URL=wss://livekit.nexflux.io
LIVEKIT_API_KEY=your_livekit_api_key
LIVEKIT_API_SECRET=your_livekit_api_secret

# =====================================
# Lab Configuration
# =====================================
LAB_SESSION_DURATION=1800    # 30 minutes in seconds
LAB_QUEUE_EXPIRY=1800        # 30 minutes
LAB_MAX_BID_MULTIPLIER=2     # Max bid = user_level * multiplier

# Code Execution Settings
ARDUINO_CLI_PATH=/usr/local/bin/arduino-cli
PLATFORMIO_PATH=/usr/local/bin/platformio
COMPILE_TIMEOUT=60           # seconds
UPLOAD_TIMEOUT=30            # seconds

# =====================================
# Production Settings
# =====================================
# In production:
# - Set GIN_MODE=release
# - Use strong JWT_SECRET (min 32 characters)
# - Enable SSL for database connection
# - Use proper Redis password
# - Set STORAGE_TYPE=minio and configure MinIO
# - Enable rate limiting
# - Set MINIO_USE_SSL=true for cloud storage
# - Configure proper MQTT authentication
# - Use SSL for RabbitMQ (AMQPS)
# - Enable LiveKit SSL (WSS)